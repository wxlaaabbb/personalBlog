(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-772959d0"],{"1b9a":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"wrapper"},[n("div",{staticClass:"title"},[n("h1",[t._v("文章编辑")]),n("div",{staticClass:"info"},[n("label",{attrs:{for:"title"}},[n("span",[t._v("标题：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{id:"title",type:"text",placeholder:"请输入标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),n("div",{staticClass:"info"},[n("label",{attrs:{for:"tags"}},[n("span",[t._v("标签：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.tags,expression:"tags"}],attrs:{type:"text",placeholder:"请输入标签，用逗号隔开"},domProps:{value:t.tags},on:{input:function(e){e.target.composing||(t.tags=e.target.value)}}})])]),n("div",{staticClass:"info"},[n("label",{attrs:{for:"vcode"}},[n("span",[t._v("验证码：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.vcode,expression:"vcode"}],attrs:{id:"vcode",type:"text",placeholder:"请输入验证码"},domProps:{value:t.vcode},on:{input:function(e){e.target.composing||(t.vcode=e.target.value)}}})])]),n("div",{staticClass:"vcode"},[n("label",[n("span"),n("img",{attrs:{id:"imgCaptcha",src:t.vCodeUrl,alt:""},on:{click:t.changeVCodeUrl}})])]),n("div",{staticClass:"btn"},[n("button",{on:{click:function(e){return t.submit()}}},[t._v("提交")])])]),n("div",{ref:"editor",staticClass:"editor"})])},a=[],r=(n("96cf"),n("1da1")),s=n("1a0b"),o=n.n(s),c=n("2423"),u=n("365c"),l={data:function(){return{bid:null,editorContent:null,title:null,tags:null,vCodeUrl:"/api/verificationCode",vcode:null}},methods:{getContent:function(){return this.editorContent},changeVCodeUrl:function(){this.vCodeUrl="/api/verificationCode?".concat((new Date).getTime())},openMessage:function(t,e){this.$message({message:e,type:t})},submit:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.title){t.next=3;break}return this.openMessage("warning","标题不能为空"),t.abrupt("return");case 3:if(this.tags){t.next=6;break}return this.openMessage("warning","标签不能为空"),t.abrupt("return");case 6:if(this.editorContent){t.next=9;break}return this.openMessage("warning","文章不能为空"),t.abrupt("return");case 9:if(this.vcode){t.next=12;break}return this.openMessage("warning","验证码不能为空"),t.abrupt("return");case 12:return e={title:this.title,tags:this.tags,content:this.getContent(),verificationCode:this.vcode,id:this.bid},this.loading=!0,t.next=16,Object(c["c"])(e);case 16:n=t.sent,0===+n.code?(this.openMessage("success",n.msg),this.changeVCodeUrl(),this.editor.txt.html(""),this.vcode=null,this.title=null,this.tags=null):this.openMessage("error",n.msg),this.loading=!1;case 19:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBlog:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])(e);case 2:n=t.sent,i=JSON.parse(n.data),this.bid=i.id,this.title=i.title,this.editorContent=i.content,this.tags=i.tags;case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},created:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.$route.query.bid,t.next=3,this.getBlog(e);case 3:this.editor.txt.html(this.editorContent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=this,e=localStorage.getItem("token");this.editor=new o.a(this.$refs.editor),this.editor.customConfig.onchange=function(e){t.editorContent=e},this.editor.customConfig.uploadImgServer="/api/upload",this.editor.customConfig.uploadImgHeaders={authorization:e},this.editor.customConfig.uploadFileName="img",this.editor.customConfig.uploadImgHooks={customInsert:function(t,e){console.log("result",e);var n=e.data;t(n)}},this.editor.create()}},d=l,g=(n("bf29"),n("2877")),p=Object(g["a"])(d,i,a,!1,null,"12e3d0fc",null);e["default"]=p.exports},"2edd":function(t,e,n){},bf29:function(t,e,n){"use strict";var i=n("2edd"),a=n.n(i);a.a}}]);
//# sourceMappingURL=chunk-772959d0.4eb56b2d.js.map